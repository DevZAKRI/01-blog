<mat-sidenav-container class="sidenav-container">
  <mat-sidenav #sidenav mode="side" opened class="sidenav">
    <mat-nav-list>
      <a mat-list-item routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
        <mat-icon matListItemIcon>home</mat-icon>
        <span matListItemTitle>Home Feed</span>
      </a>
      <a mat-list-item *ngIf="currentUser$ | async as currentUser" [routerLink]="['/profile', currentUser?.id]" routerLinkActive="active">
        <mat-icon matListItemIcon>person</mat-icon>
        <span matListItemTitle>My Block</span>
      </a>
      <a mat-list-item routerLink="/notifications" routerLinkActive="active">
        <mat-icon matListItemIcon [matBadge]="(unreadCount$ | async) || 0"
                  [matBadgeHidden]="!(unreadCount$ | async)">
          notifications
        </mat-icon>
        <span matListItemTitle>Notifications</span>
      </a>
      <a mat-list-item routerLink="/settings" routerLinkActive="active">
        <mat-icon matListItemIcon>settings</mat-icon>
        <span matListItemTitle>Settings</span>
      </a>
      <a mat-list-item routerLink="/admin" routerLinkActive="active" *ngIf="isAdmin">
        <mat-icon matListItemIcon>admin_panel_settings</mat-icon>
        <span matListItemTitle>Admin Panel</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar class="toolbar">
      <a routerLink="/" class="toolbar-logo">
        <mat-icon class="logo-icon">article</mat-icon>
        <span class="toolbar-title">01Blog</span>
      </a>
      <nav class="toolbar-nav">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Home</a>
        <a routerLink="/explore">Explore</a>
        <a routerLink="/notifications" routerLinkActive="active">Notifications</a>
      </nav>
      <span class="spacer"></span>
      <div class="toolbar-actions">
        <button mat-raised-button color="primary" class="create-post-btn" (click)="onCreatePost()">
          <mat-icon>add</mat-icon>
          New Post
        </button>
        <button mat-icon-button routerLink="/notifications"
                [matBadge]="(unreadCount$ | async) || 0"
                [matBadgeHidden]="!(unreadCount$ | async)"
                class="notification-btn">
          <mat-icon>notifications</mat-icon>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-avatar-btn">
          <img [src]="(currentUser$ | async) | avatar" alt="Avatar" class="user-avatar">
        </button>
      </div>
      <mat-menu #userMenu="matMenu">
        <ng-container *ngIf="currentUser$ | async as currentUser">
          <div class="user-menu-header">
            <p class="user-name">{{ currentUser.username }}</p>
            <p class="user-email">{{ currentUser.email }}</p>
          </div>
          <mat-divider></mat-divider>
          <button mat-menu-item [routerLink]="['/profile', currentUser.id]">
          <mat-icon>person</mat-icon>
          <span>My Profile</span>
        </button>
        <button mat-menu-item routerLink="/settings">
          <mat-icon>settings</mat-icon>
          <span>Settings</span>
        </button>
        <button mat-menu-item routerLink="/admin" *ngIf="isAdmin">
          <mat-icon>admin_panel_settings</mat-icon>
          <span>Admin Panel</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="onLogout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
        </ng-container>
      </mat-menu>
    </mat-toolbar>

    <app-toast></app-toast>

    <div class="content">
      <router-outlet></router-outlet>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item">
        <mat-icon>home</mat-icon>
        <span>Home</span>
      </a>
      <a routerLink="/explore" routerLinkActive="active" class="nav-item">
        <mat-icon>explore</mat-icon>
        <span>Explore</span>
      </a>
      <button class="nav-item create-btn" (click)="onCreatePost()">
        <mat-icon>add_circle</mat-icon>
        <span>Post</span>
      </button>
      <a routerLink="/notifications" routerLinkActive="active" class="nav-item">
        <mat-icon [matBadge]="(unreadCount$ | async) || 0"
                  [matBadgeHidden]="!(unreadCount$ | async)"
                  matBadgeSize="small">notifications</mat-icon>
        <span>Alerts</span>
      </a>
      <a *ngIf="currentUser$ | async as currentUser" [routerLink]="['/profile', currentUser?.id]" routerLinkActive="active" class="nav-item">
        <mat-icon>person</mat-icon>
        <span>Profile</span>
      </a>
    </nav>
  </mat-sidenav-content>
</mat-sidenav-container>
