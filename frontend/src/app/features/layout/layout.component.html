<mat-sidenav-container class="sidenav-container">
  <mat-sidenav #sidenav mode="side" opened class="sidenav">
    <mat-nav-list>
      <a mat-list-item routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
        <mat-icon matListItemIcon>home</mat-icon>
        <span matListItemTitle>Home Feed</span>
      </a>
      <a mat-list-item *ngIf="currentUser" [routerLink]="['/profile', currentUser?.id]" routerLinkActive="active">
        <mat-icon matListItemIcon>person</mat-icon>
        <span matListItemTitle>My Block</span>
      </a>
      <a mat-list-item routerLink="/notifications" routerLinkActive="active">
        <mat-icon matListItemIcon [matBadge]="(unreadCount$ | async) || 0"
                  [matBadgeHidden]="!(unreadCount$ | async)">
          notifications
        </mat-icon>
        <span matListItemTitle>Notifications</span>
      </a>
      <a mat-list-item routerLink="/settings" routerLinkActive="active">
        <mat-icon matListItemIcon>settings</mat-icon>
        <span matListItemTitle>Settings</span>
      </a>
      <a mat-list-item routerLink="/admin" routerLinkActive="active" *ngIf="isAdmin">
        <mat-icon matListItemIcon>admin_panel_settings</mat-icon>
        <span matListItemTitle>Admin Panel</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar class="toolbar">
      <div class="toolbar-logo">
        <mat-icon class="logo-icon">article</mat-icon>
        <span class="toolbar-title">01Blog</span>
      </div>
      <nav class="toolbar-nav">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Home</a>
        <a routerLink="/explore">Explore</a>
        <a routerLink="/notifications" routerLinkActive="active">Notifications</a>
      </nav>
      <span class="spacer"></span>
      <div class="toolbar-actions">
        <button mat-icon-button class="theme-toggle">
          <mat-icon>light_mode</mat-icon>
        </button>
        <button mat-raised-button color="primary" class="create-post-btn" (click)="onCreatePost()">
          <mat-icon>add</mat-icon>
          New Post
        </button>
        <button mat-icon-button routerLink="/notifications"
                [matBadge]="(unreadCount$ | async) || 0"
                [matBadgeHidden]="!(unreadCount$ | async)"
                class="notification-btn">
          <mat-icon>notifications</mat-icon>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-avatar-btn">
          <img [src]="currentUser | avatar" alt="Avatar" class="user-avatar">
        </button>
      </div>
      <mat-menu #userMenu="matMenu">
        <div class="user-menu-header">
          <p class="user-name">{{ currentUser?.username }}</p>
          <p class="user-email">{{ currentUser?.email }}</p>
        </div>
        <mat-divider></mat-divider>
        <button mat-menu-item *ngIf="currentUser" [routerLink]="['/profile', currentUser?.id]">
          <mat-icon>person</mat-icon>
          <span>My Profile</span>
        </button>
        <button mat-menu-item routerLink="/settings">
          <mat-icon>settings</mat-icon>
          <span>Settings</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="onLogout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <div class="content">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
